(this["webpackJsonpexpense-tracker-react-firebase"]=this["webpackJsonpexpense-tracker-react-firebase"]||[]).push([[0],{20:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a.n(n),r=a(21),c=a.n(r),i=(a(27),a(28),a(10)),o=a(11),l=a(13),u=a(12),h=(a(29),a(22).a.initializeApp({apiKey:"AIzaSyBP3vq39W_n-InVUZUwoPTD3dvWO94C0Q0",authDomain:"jdcode1-38a90.firebaseapp.com",projectId:"jdcode1-38a90",storageBucket:"jdcode1-38a90.appspot.com",messagingSenderId:"637942497293",appId:"1:637942497293:web:75ecc6d13e5354fd69d544",measurementId:"G-GV2S4P3YQD"})),d=a(15),p=(a(20),a(2)),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",fireErrors:""},e.login=function(t){t.preventDefault(),h.auth().signInWithEmailAndPassword(e.state.email,e.state.password).catch((function(t){e.setState({fireErrors:t.message})}))},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.fireErrors?Object(p.jsx)("div",{className:"Error",children:this.state.fireErrors}):null;return Object(p.jsxs)(p.Fragment,{children:[e,Object(p.jsxs)("form",{children:[Object(p.jsx)("input",{type:"text",className:"regField",placeholder:"Email",value:this.state.email,onChange:this.handleChange,name:"email"}),Object(p.jsx)("input",{type:"password",className:"regField",placeholder:"Password",value:this.state.password,onChange:this.handleChange,name:"password"}),Object(p.jsx)("input",{onClick:this.login,type:"submit",className:"submitBtn",value:"SIGN IN"})]})]})}}]),a}(n.Component),m=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:"",displayName:"",fireErrors:""},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.name,t.target.value))},e.register=function(t){t.preventDefault(),h.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(t){h.auth().currentUser.updateProfile({displayName:e.state.displayName})})).catch((function(t){e.setState({fireErrors:t.message})}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.fireErrors?Object(p.jsx)("div",{className:"Error",children:this.state.fireErrors}):null;return Object(p.jsxs)(p.Fragment,{children:[e,Object(p.jsxs)("form",{children:[Object(p.jsx)("input",{type:"text",className:"regField",placeholder:"Your Name",onChange:this.handleChange,value:this.state.displayName,name:"displayName"}),Object(p.jsx)("input",{type:"text",className:"regField",placeholder:"Email",onChange:this.handleChange,value:this.state.email,name:"email"}),Object(p.jsx)("input",{type:"password",className:"regField",placeholder:"Password",onChange:this.handleChange,value:this.state.password,name:"password"}),Object(p.jsx)("input",{onClick:this.register,type:"submit",className:"submitBtn",value:"REGISTER"})]})]})}}]),a}(n.Component),b=(a(36),function(e){return Object(p.jsxs)("li",{children:[Object(p.jsx)("div",{children:e.name}),Object(p.jsx)("div",{children:"deposit"===e.type?Object(p.jsxs)("span",{className:"deposit",children:[" +",e.price," "]}):Object(p.jsxs)("span",{className:"expense",children:["-",e.price]})})]})}),f=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={transactions:[],money:0,transactionName:"",transactionType:"",price:"",currentUID:h.auth().currentUser.uid},e.logout=function(){h.auth().signOut()},e.handleChange=function(t){return function(a){e.setState(Object(d.a)({},t,"0"!==a.target.value?a.target.value:""))}},e.addNewTransaction=function(){var t=e.state,a=t.transactionName,n=t.transactionType,s=t.price,r=t.currentUID,c=t.money;if(a&&n&&s){var i=e.state.transactions;i.push({id:i.length+1,name:a,type:n,price:s,user_id:r}),h.database().ref("Transactions/"+r).push({id:i.length,name:a,type:n,price:s,user_id:r}).then((function(t){console.log("success callback"),e.setState({transactions:i,money:"deposit"===n?c+parseFloat(s):c-parseFloat(s),transactionName:"",transactionType:"",price:""})})).catch((function(e){console.log("error ",e)}))}},e}return Object(o.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.state,a=t.currentUID,n=t.money,s=this.state.transactions;h.database().ref("Transactions/"+a).once("value",(function(t){t.forEach((function(e){n="deposit"===e.val().type?parseFloat(e.val().price)+n:n-parseFloat(e.val().price),s.push({id:e.val().id,name:e.val().name,type:e.val().type,price:e.val().price,user_id:e.val().user_id})})),e.setState({transactions:s,money:n})}))}},{key:"render",value:function(){var e=this,t=h.auth().currentUser;return Object(p.jsxs)("div",{className:"trackerBlock",children:[Object(p.jsxs)("div",{className:"welcome",children:[Object(p.jsxs)("span",{children:["Hi, ",t.displayName,"!"]}),Object(p.jsx)("button",{className:"exit",onClick:this.logout,children:"Exit"})]}),Object(p.jsxs)("div",{className:"totalMoney",children:["$",this.state.money]}),Object(p.jsx)("div",{className:"newTransactionBlock",children:Object(p.jsxs)("div",{className:"newTransaction",children:[Object(p.jsxs)("form",{children:[Object(p.jsx)("input",{onChange:this.handleChange("transactionName"),value:this.state.transactionName,placeholder:"Transaction Name",type:"text",name:"transactionName"}),Object(p.jsxs)("div",{className:"inputGroup",children:[Object(p.jsxs)("select",{name:"type",onChange:this.handleChange("transactionType"),value:this.state.transactionType,children:[Object(p.jsx)("option",{value:"0",children:"Type"}),Object(p.jsx)("option",{value:"expense",children:"Expense"}),Object(p.jsx)("option",{value:"deposit",children:"Deposit"})]}),Object(p.jsx)("input",{onChange:this.handleChange("price"),value:this.state.price,placeholder:"Price",type:"text",name:"price"})]})]}),Object(p.jsx)("button",{onClick:function(){return e.addNewTransaction()},className:"addTransaction",children:"+ Add Transaction"})]})}),Object(p.jsxs)("div",{className:"latestTransactions",children:[Object(p.jsx)("p",{children:"Latest Transactions"}),Object(p.jsx)("ul",{children:Object.keys(this.state.transactions).map((function(t){return Object(p.jsx)(b,{type:e.state.transactions[t].type,name:e.state.transactions[t].name,price:e.state.transactions[t].price},t)}))})]})]})}}]),a}(n.Component),v=a.p+"static/media/loader.1bcd0c30.gif",O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:1,loading:!0,formSwitcher:!1},e.formSwitcher=function(t){console.log(t),e.setState({formSwitcher:"register"===t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;h.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:null})}))}},{key:"render",value:function(){var e=this,t=this.state.formSwitcher?Object(p.jsx)(m,{}):Object(p.jsx)(j,{});return 1===this.state.user?Object(p.jsx)("div",{className:"mainBlock",children:Object(p.jsx)("div",{className:"Spinner",children:Object(p.jsx)("img",{src:v,alt:"Spinner",className:"ImgSpinner"})})}):Object(p.jsx)(p.Fragment,{children:this.state.user?Object(p.jsx)(f,{}):Object(p.jsxs)("div",{className:"mainBlock",children:[t,this.state.formSwitcher?Object(p.jsxs)("span",{className:"underLine",children:["Have an account? ",Object(p.jsx)("button",{onClick:function(){return e.formSwitcher(e.state.formSwitcher?"login":"register")},className:"linkBtn",children:"Sign in here"})]}):Object(p.jsxs)("span",{className:"underLine",children:["Not Registered? ",Object(p.jsx)("button",{onClick:function(){return e.formSwitcher(e.state.formSwitcher?"login":"register")},className:"linkBtn",children:"Create an account"})]})]})})}}]),a}(n.Component);var g=function(){return Object(p.jsx)(O,{})},x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root")),x()}},[[37,1,2]]]);
//# sourceMappingURL=main.98b07ff1.chunk.js.map